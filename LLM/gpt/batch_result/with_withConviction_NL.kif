(role red)
(role blue)

(index 1)
(index 2)
(index 3)
(index 4)
(index 5)

(shade weak)
(shade medium)
(shade strong)

(init (control red))

(<= (legal red noop)
    (true (control blue)))
(<= (legal red (mark ?i ?j ?shade))
    (true (control red))
    (emptyCell ?i ?j)
    (not (prohibited red ?shade)))
(<= (legal blue noop)
    (true (control red)))
(<= (legal blue (mark ?i ?j ?shade))
    (true (control blue))
    (emptyCell ?i ?j)
    (not (prohibited blue ?shade)))

(<= (next (cell ?i ?j ?shade))
    (role ?player)
    (does ?player (mark ?i ?j ?shade)))
(<= (next (cell ?i ?j ?shade))
    (true (cell ?i ?j ?shade)))
(<= (next (control red))
    (true (control blue)))
(<= (next (control blue))
    (true (control red)))

(<= terminal
    (line))
(<= terminal
    (not open))

(<= (goal red 100)
    (line)
    (true (control red)))
(<= (goal red 50)
    (not (line))
    (not open))
(<= (goal red 0)
    (line)
    (true (control blue)))
(<= (goal blue 100)
    (line)
    (true (control blue)))
(<= (goal blue 50)
    (not (line))
    (not open))
(<= (goal blue 0)
    (line)
    (true (control red)))

(<= (row ?i)
    (index ?j)
    (true (cell ?i ?j ?shade))
    (not (opponentMark ?i ?j)))
(<= (col ?j)
    (index ?i)
    (true (cell ?i ?j ?shade))
    (not (opponentMark ?i ?j)))

(<= (line)
    (index ?i)
    (row ?i))
(<= (line)
    (index ?j)
    (col ?j))

(<= (emptyCell ?i ?j)
    (index ?i)
    (index ?j)
    (not (true (cell ?i ?j ?shade))))
(<= open
    (emptyCell ?i ?j))

(<= (prohibited red medium)
    (true (usedWeak red)))
(<= (prohibited red strong)
    (true (usedWeak red)))
(<= (prohibited blue medium)
    (true (usedWeak blue)))
(<= (prohibited blue strong)
    (true (usedWeak blue)))

(<= (next (usedWeak ?player))
    (does ?player (mark ?i ?j weak)))
(<= (next (usedWeak ?player))
    (true (usedWeak ?player)))

(<= (opponentMark ?i ?j)
    (role ?player)
    (role ?opponent)
    (distinct ?player ?opponent)
    (true (cell ?i ?j ?shade)))