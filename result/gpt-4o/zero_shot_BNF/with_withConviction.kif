(role red)
(role blue)

(init (control red))
(init (cell 1 1 empty))
(init (cell 1 2 empty))
(init (cell 1 3 empty))
(init (cell 1 4 empty))
(init (cell 1 5 empty))
(init (cell 2 1 empty))
(init (cell 2 2 empty))
(init (cell 2 3 empty))
(init (cell 2 4 empty))
(init (cell 2 5 empty))
(init (cell 3 1 empty))
(init (cell 3 2 empty))
(init (cell 3 3 empty))
(init (cell 3 4 empty))
(init (cell 3 5 empty))
(init (cell 4 1 empty))
(init (cell 4 2 empty))
(init (cell 4 3 empty))
(init (cell 4 4 empty))
(init (cell 4 5 empty))
(init (cell 5 1 empty))
(init (cell 5 2 empty))
(init (cell 5 3 empty))
(init (cell 5 4 empty))
(init (cell 5 5 empty))

(<= (legal ?player noop)
    (role ?player)
    (not (true (control ?player))))

(<= (legal ?player (mark ?x ?y ?shade))
    (role ?player)
    (true (control ?player))
    (true (cell ?x ?y empty))
    (not (prohibited ?player ?shade)))

(<= (next (cell ?x ?y ?shade))
    (does ?player (mark ?x ?y ?shade)))

(<= (next (cell ?x ?y ?shade))
    (true (cell ?x ?y ?shade))
    (distinct ?shade empty))

(<= (next (cell ?x ?y empty))
    (true (cell ?x ?y empty))
    (not (does ?player (mark ?x ?y ?shade))))

(<= (next (control red))
    (true (control blue)))

(<= (next (control blue))
    (true (control red)))

(<= (terminal)
    (lineComplete ?player))

(<= (terminal)
    (not (openCell)))

(<= (goal red 100)
    (lineComplete red))

(<= (goal blue 0)
    (lineComplete red))

(<= (goal blue 100)
    (lineComplete blue))

(<= (goal red 0)
    (lineComplete blue))

(<= (goal red 50)
    (not (lineComplete red))
    (not (lineComplete blue))
    (not (openCell)))

(<= (goal blue 50)
    (not (lineComplete red))
    (not (lineComplete blue))
    (not (openCell)))

(<= (lineComplete ?player)
    (role ?player)
    (rowComplete ?player ?x))

(<= (lineComplete ?player)
    (role ?player)
    (columnComplete ?player ?y))

(<= (rowComplete ?player ?x)
    (role ?player)
    (true (cell ?x 1 ?shade))
    (true (cell ?x 2 ?shade))
    (true (cell ?x 3 ?shade))
    (true (cell ?x 4 ?shade))
    (true (cell ?x 5 ?shade))
    (not (opponentMark ?player ?x)))

(<= (columnComplete ?player ?y)
    (role ?player)
    (true (cell 1 ?y ?shade))
    (true (cell 2 ?y ?shade))
    (true (cell 3 ?y ?shade))
    (true (cell 4 ?y ?shade))
    (true (cell 5 ?y ?shade))
    (not (opponentMark ?player ?y)))

(<= (opponentMark ?player ?x)
    (role ?player)
    (role ?opponent)
    (distinct ?player ?opponent)
    (true (cell ?x ?y ?opponentShade))
    (distinct ?opponentShade empty))

(<= (openCell)
    (true (cell ?x ?y empty)))

(prohibited red medium)
(prohibited red strong)
(prohibited blue weak)

(index 1)
(index 2)
(index 3)
(index 4)
(index 5)

(shade weak)
(shade medium)
(shade strong)