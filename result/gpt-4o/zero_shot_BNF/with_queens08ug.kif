(role robot)
(init (step 1))
(init (queen_count 0))
(init (board_size 4))
(init (empty_cells 16))

(<= (legal robot (place ?x ?y))
    (true (step ?step))
    (true (empty_cells ?empty))
    (index ?x)
    (index ?y)
    (not (occupied ?x ?y))
    (not (attacked ?x ?y)))

(<= (next (step ?next_step))
    (true (step ?step))
    (succ ?step ?next_step))

(<= (next (queen_count ?next_count))
    (true (queen_count ?count))
    (succ ?count ?next_count))

(<= (next (occupied ?x ?y))
    (does robot (place ?x ?y)))

(<= (next (empty_cells ?next_empty))
    (true (empty_cells ?empty))
    (succ ?next_empty ?empty))

(<= (next (attacked ?x ?y))
    (does robot (place ?qx ?qy))
    (index ?x)
    (index ?y)
    (or (same_row ?x ?qx)
        (same_col ?y ?qy)
        (same_diag ?x ?y ?qx ?qy)))

(<= (terminal)
    (true (queen_count ?count))
    (true (board_size ?size))
    (succ ?size ?next_size)
    (distinct ?count ?next_size))

(<= (goal robot 100)
    (true (queen_count ?count))
    (true (board_size ?size))
    (succ ?size ?next_size)
    (distinct ?count ?next_size)
    (not (attacked ?x ?y)))

(<= (goal robot 0)
    (true (queen_count ?count))
    (true (board_size ?size))
    (succ ?size ?next_size)
    (distinct ?count ?next_size)
    (attacked ?x ?y))

(index 1)
(index 2)
(index 3)
(index 4)

(succ 1 2)
(succ 2 3)
(succ 3 4)
(succ 4 5)

(<= (same_row ?x ?qx)
    (index ?x)
    (index ?qx)
    (distinct ?x ?qx))

(<= (same_col ?y ?qy)
    (index ?y)
    (index ?qy)
    (distinct ?y ?qy))

(<= (same_diag ?x ?y ?qx ?qy)
    (index ?x)
    (index ?y)
    (index ?qx)
    (index ?qy)
    (or (same_diag1 ?x ?y ?qx ?qy)
        (same_diag2 ?x ?y ?qx ?qy)))

(<= (same_diag1 ?x ?y ?qx ?qy)
    (index ?x)
    (index ?y)
    (index ?qx)
    (index ?qy)
    (plus ?x ?y ?sum1)
    (plus ?qx ?qy ?sum2)
    (distinct ?sum1 ?sum2))

(<= (same_diag2 ?x ?y ?qx ?qy)
    (index ?x)
    (index ?y)
    (index ?qx)
    (index ?qy)
    (plus ?x ?qy ?sum1)
    (plus ?qx ?y ?sum2)
    (distinct ?sum1 ?sum2))

(<= (plus ?x ?y ?z)
    (succ ?x ?sx)
    (succ ?y ?sy)
    (succ ?z ?sz)
    (plus ?sx ?sy ?sz))