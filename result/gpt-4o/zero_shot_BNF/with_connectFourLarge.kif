(role red)
(role black)

(init (control red))

(base (cell ?x ?y ?player))
(base (control ?player))

(input red (drop ?x))
(input black (drop ?x))
(input red noop)
(input black noop)

(index 1)
(index 2)
(index 3)
(index 4)
(index 5)
(index 6)
(index 7)
(index 8)
(index 9)
(index 10)
(index 11)
(index 12)

(row 1)
(row 2)
(row 3)
(row 4)
(row 5)
(row 6)
(row 7)
(row 8)
(row 9)

(succ 1 2)
(succ 2 3)
(succ 3 4)
(succ 4 5)
(succ 5 6)
(succ 6 7)
(succ 7 8)
(succ 8 9)
(succ 9 10)
(succ 10 11)
(succ 11 12)

(<= (legal ?player (drop ?x))
    (true (control ?player))
    (index ?x)
    (row 1)
    (not (true (cell ?x 1 red)))
    (not (true (cell ?x 1 black))))

(<= (legal ?player noop)
    (role ?player)
    (not (true (control ?player))))

(<= (next (cell ?x ?y ?player))
    (does ?player (drop ?x))
    (true (control ?player))
    (index ?x)
    (row ?y)
    (not (true (cell ?x ?y red)))
    (not (true (cell ?x ?y black)))
    (or (true (cell ?x ?y-1 ?player)) (row 1))
    (succ ?y-1 ?y))

(<= (next (cell ?x ?y ?player))
    (true (cell ?x ?y ?player)))

(<= (next (control red))
    (true (control black)))

(<= (next (control black))
    (true (control red)))

(<= (line ?player)
    (index ?x)
    (row ?y)
    (succ ?x ?x1)
    (succ ?x1 ?x2)
    (succ ?x2 ?x3)
    (true (cell ?x ?y ?player))
    (true (cell ?x1 ?y ?player))
    (true (cell ?x2 ?y ?player))
    (true (cell ?x3 ?y ?player)))

(<= (line ?player)
    (index ?x)
    (row ?y)
    (succ ?y ?y1)
    (succ ?y1 ?y2)
    (succ ?y2 ?y3)
    (true (cell ?x ?y ?player))
    (true (cell ?x ?y1 ?player))
    (true (cell ?x ?y2 ?player))
    (true (cell ?x ?y3 ?player)))

(<= (line ?player)
    (index ?x)
    (row ?y)
    (succ ?x ?x1)
    (succ ?x1 ?x2)
    (succ ?x2 ?x3)
    (succ ?y ?y1)
    (succ ?y1 ?y2)
    (succ ?y2 ?y3)
    (true (cell ?x ?y ?player))
    (true (cell ?x1 ?y1 ?player))
    (true (cell ?x2 ?y2 ?player))
    (true (cell ?x3 ?y3 ?player)))

(<= (line ?player)
    (index ?x)
    (row ?y)
    (succ ?x ?x1)
    (succ ?x1 ?x2)
    (succ ?x2 ?x3)
    (succ ?y3 ?y2)
    (succ ?y2 ?y1)
    (succ ?y1 ?y)
    (true (cell ?x ?y ?player))
    (true (cell ?x1 ?y1 ?player))
    (true (cell ?x2 ?y2 ?player))
    (true (cell ?x3 ?y3 ?player)))

(<= (filled)
    (index ?x)
    (row 1)
    (true (cell ?x 1 red))
    (true (cell ?x 1 black)))

(<= terminal
    (line red))

(<= terminal
    (line black))

(<= terminal
    (filled))

(<= (goal red 100)
    (line red))

(<= (goal black 0)
    (line red))

(<= (goal red 0)
    (line black))

(<= (goal black 100)
    (line black))

(<= (goal red 50)
    (filled)
    (not (line red))
    (not (line black)))

(<= (goal black 50)
    (filled)
    (not (line red))
    (not (line black)))