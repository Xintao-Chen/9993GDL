(role xrow)
(role xcolumn)
(role xlevel)
(role orow)
(role ocolumn)
(role olevel)

(init (control xrow))
(init (cell 1 1 1 b))
(init (cell 1 1 2 b))
(init (cell 1 1 3 b))
(init (cell 1 2 1 b))
(init (cell 1 2 2 b))
(init (cell 1 2 3 b))
(init (cell 1 3 1 b))
(init (cell 1 3 2 b))
(init (cell 1 3 3 b))
(init (cell 2 1 1 b))
(init (cell 2 1 2 b))
(init (cell 2 1 3 b))
(init (cell 2 2 1 b))
(init (cell 2 2 2 b))
(init (cell 2 2 3 b))
(init (cell 2 3 1 b))
(init (cell 2 3 2 b))
(init (cell 2 3 3 b))
(init (cell 3 1 1 b))
(init (cell 3 1 2 b))
(init (cell 3 1 3 b))
(init (cell 3 2 1 b))
(init (cell 3 2 2 b))
(init (cell 3 2 3 b))
(init (cell 3 3 1 b))
(init (cell 3 3 2 b))
(init (cell 3 3 3 b))

(index 1)
(index 2)
(index 3)

(<= (legal xrow (select ?x))
    (true (control xrow))
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z b)))

(<= (legal xcolumn (select ?y))
    (true (control xcolumn))
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z b)))

(<= (legal xlevel (select ?z))
    (true (control xlevel))
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z b)))

(<= (legal orow (select ?x))
    (true (control orow))
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z b)))

(<= (legal ocolumn (select ?y))
    (true (control ocolumn))
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z b)))

(<= (legal olevel (select ?z))
    (true (control olevel))
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z b)))

(<= (legal ?player noop)
    (role ?player)
    (not (true (control ?player))))

(<= (next (cell ?x ?y ?z x))
    (does xrow (select ?x))
    (does xcolumn (select ?y))
    (does xlevel (select ?z))
    (true (cell ?x ?y ?z b)))

(<= (next (cell ?x ?y ?z o))
    (does orow (select ?x))
    (does ocolumn (select ?y))
    (does olevel (select ?z))
    (true (cell ?x ?y ?z b)))

(<= (next (cell ?x ?y ?z ?mark))
    (true (cell ?x ?y ?z ?mark))
    (distinct ?mark b))

(<= (next (control xcolumn))
    (true (control xrow)))

(<= (next (control xlevel))
    (true (control xcolumn)))

(<= (next (control orow))
    (true (control xlevel)))

(<= (next (control ocolumn))
    (true (control orow)))

(<= (next (control olevel))
    (true (control ocolumn)))

(<= (next (control xrow))
    (true (control olevel)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell ?x ?y (succ ?z) ?mark))
    (true (cell ?x ?y (succ (succ ?z)) ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell ?x (succ ?y) ?z ?mark))
    (true (cell ?x (succ (succ ?y)) ?z ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell (succ ?x) ?y ?z ?mark))
    (true (cell (succ (succ ?x)) ?y ?z ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell (succ ?x) (succ ?y) ?z ?mark))
    (true (cell (succ (succ ?x)) (succ (succ ?y)) ?z ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell (succ ?x) ?y (succ ?z) ?mark))
    (true (cell (succ (succ ?x)) ?y (succ (succ ?z)) ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell ?x (succ ?y) (succ ?z) ?mark))
    (true (cell ?x (succ (succ ?y)) (succ (succ ?z)) ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell (succ ?x) (succ ?y) (succ ?z) ?mark))
    (true (cell (succ (succ ?x)) (succ (succ ?y)) (succ (succ ?z)) ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell (succ ?x) (succ ?y) (succ ?z) ?mark))
    (true (cell (succ (succ ?x)) (succ (succ ?y)) (succ (succ ?z)) ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell (succ ?x) (succ (succ ?y)) (succ ?z) ?mark))
    (true (cell (succ (succ ?x)) (succ (succ (succ ?y))) (succ (succ ?z)) ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell (succ (succ ?x)) (succ ?y) (succ ?z) ?mark))
    (true (cell (succ (succ (succ ?x))) (succ (succ ?y)) (succ (succ ?z)) ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell (succ ?x) (succ (succ ?y)) (succ (succ ?z)) ?mark))
    (true (cell (succ (succ ?x)) (succ (succ (succ ?y))) (succ (succ (succ ?z))) ?mark)))

(<= (line ?mark)
    (index ?x)
    (index ?y)
    (index ?z)
    (true (cell ?x ?y ?z ?mark))
    (true (cell (succ (succ ?x)) (succ (succ ?y)) (succ (succ ?z)) ?mark))
    (true (cell (succ (succ (succ ?x))) (succ (succ (succ ?y))) (succ (succ (succ ?z))) ?mark)))

(<= (terminal)
    (line x))

(<= (terminal)
    (line o))

(<= (terminal)
    (not (true (cell ?x ?y ?z b)))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (goal xrow 100)
    (line x))

(<= (goal xcolumn 100)
    (line x))

(<= (goal xlevel 100)
    (line x))

(<= (goal orow 100)
    (line o))

(<= (goal ocolumn 100)
    (line o))

(<= (goal olevel 100)
    (line o))

(<= (goal xrow 50)
    (not (line x))
    (not (line o))
    (not (true (cell ?x ?y ?z b)))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (goal xcolumn 50)
    (not (line x))
    (not (line o))
    (not (true (cell ?x ?y ?z b)))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (goal xlevel 50)
    (not (line x))
    (not (line o))
    (not (true (cell ?x ?y ?z b)))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (goal orow 50)
    (not (line x))
    (not (line o))
    (not (true (cell ?x ?y ?z b)))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (goal ocolumn 50)
    (not (line x))
    (not (line o))
    (not (true (cell ?x ?y ?z b)))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (goal olevel 50)
    (not (line x))
    (not (line o))
    (not (true (cell ?x ?y ?z b)))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (goal xrow 0)
    (line o))

(<= (goal xcolumn 0)
    (line o))

(<= (goal xlevel 0)
    (line o))

(<= (goal orow 0)
    (line x))

(<= (goal ocolumn 0)
    (line x))

(<= (goal olevel 0)
    (line x))