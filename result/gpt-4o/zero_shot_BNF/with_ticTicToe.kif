(role xplayer)
(role oplayer)

(init (cell 1 1 b))
(init (cell 1 2 b))
(init (cell 1 3 b))
(init (cell 2 1 b))
(init (cell 2 2 b))
(init (cell 2 3 b))
(init (cell 3 1 b))
(init (cell 3 2 b))
(init (cell 3 3 b))
(init (step 1))

(succ 1 2)
(succ 2 3)
(succ 3 4)
(succ 4 5)
(succ 5 6)
(succ 6 7)
(succ 7 8)
(succ 8 9)

(index 1)
(index 2)
(index 3)

(<= (legal ?player (mark ?x ?y))
    (role ?player)
    (index ?x)
    (index ?y)
    (true (cell ?x ?y b)))

(<= (legal xplayer noop)
    (true (step 9)))

(<= (legal oplayer noop)
    (true (step 9)))

(<= (next (cell ?x ?y x))
    (does xplayer (mark ?x ?y))
    (true (cell ?x ?y b)))

(<= (next (cell ?x ?y o))
    (does oplayer (mark ?x ?y))
    (true (cell ?x ?y b)))

(<= (next (cell ?x ?y ?mark))
    (true (cell ?x ?y ?mark))
    (distinct ?mark b))

(<= (next (step ?next))
    (true (step ?current))
    (succ ?current ?next))

(<= (line ?player)
    (role ?player)
    (true (cell ?x1 ?y ?mark))
    (true (cell ?x2 ?y ?mark))
    (true (cell ?x3 ?y ?mark))
    (role ?player)
    (does ?player (mark ?x1 ?y))
    (does ?player (mark ?x2 ?y))
    (does ?player (mark ?x3 ?y)))

(<= (line ?player)
    (role ?player)
    (true (cell ?x ?y1 ?mark))
    (true (cell ?x ?y2 ?mark))
    (true (cell ?x ?y3 ?mark))
    (role ?player)
    (does ?player (mark ?x ?y1))
    (does ?player (mark ?x ?y2))
    (does ?player (mark ?x ?y3)))

(<= (line ?player)
    (role ?player)
    (true (cell ?x1 ?y1 ?mark))
    (true (cell ?x2 ?y2 ?mark))
    (true (cell ?x3 ?y3 ?mark))
    (role ?player)
    (does ?player (mark ?x1 ?y1))
    (does ?player (mark ?x2 ?y2))
    (does ?player (mark ?x3 ?y3)))

(<= (line ?player)
    (role ?player)
    (true (cell ?x1 ?y3 ?mark))
    (true (cell ?x2 ?y2 ?mark))
    (true (cell ?x3 ?y1 ?mark))
    (role ?player)
    (does ?player (mark ?x1 ?y3))
    (does ?player (mark ?x2 ?y2))
    (does ?player (mark ?x3 ?y1)))

(<= (terminal)
    (true (step 9)))

(<= (terminal)
    (line xplayer))

(<= (terminal)
    (line oplayer))

(<= (goal xplayer 100)
    (line xplayer)
    (not (line oplayer)))

(<= (goal oplayer 100)
    (line oplayer)
    (not (line xplayer)))

(<= (goal xplayer 50)
    (line xplayer)
    (line oplayer))

(<= (goal oplayer 50)
    (line xplayer)
    (line oplayer))

(<= (goal xplayer 50)
    (not (line xplayer))
    (not (line oplayer))
    (true (step 9)))

(<= (goal oplayer 50)
    (not (line xplayer))
    (not (line oplayer))
    (true (step 9)))

(<= (goal xplayer 0)
    (line oplayer)
    (not (line xplayer)))

(<= (goal oplayer 0)
    (line xplayer)
    (not (line oplayer)))