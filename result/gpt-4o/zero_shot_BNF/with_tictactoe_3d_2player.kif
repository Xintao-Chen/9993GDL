(role xplayer)
(role oplayer)

(init (control xplayer))
(init (cell 1 1 1 b))
(init (cell 1 1 2 b))
(init (cell 1 1 3 b))
(init (cell 1 1 4 b))
(init (cell 1 2 1 b))
(init (cell 1 2 2 b))
(init (cell 1 2 3 b))
(init (cell 1 2 4 b))
(init (cell 1 3 1 b))
(init (cell 1 3 2 b))
(init (cell 1 3 3 b))
(init (cell 1 3 4 b))
(init (cell 1 4 1 b))
(init (cell 1 4 2 b))
(init (cell 1 4 3 b))
(init (cell 1 4 4 b))
(init (cell 2 1 1 b))
(init (cell 2 1 2 b))
(init (cell 2 1 3 b))
(init (cell 2 1 4 b))
(init (cell 2 2 1 b))
(init (cell 2 2 2 b))
(init (cell 2 2 3 b))
(init (cell 2 2 4 b))
(init (cell 2 3 1 b))
(init (cell 2 3 2 b))
(init (cell 2 3 3 b))
(init (cell 2 3 4 b))
(init (cell 2 4 1 b))
(init (cell 2 4 2 b))
(init (cell 2 4 3 b))
(init (cell 2 4 4 b))
(init (cell 3 1 1 b))
(init (cell 3 1 2 b))
(init (cell 3 1 3 b))
(init (cell 3 1 4 b))
(init (cell 3 2 1 b))
(init (cell 3 2 2 b))
(init (cell 3 2 3 b))
(init (cell 3 2 4 b))
(init (cell 3 3 1 b))
(init (cell 3 3 2 b))
(init (cell 3 3 3 b))
(init (cell 3 3 4 b))
(init (cell 3 4 1 b))
(init (cell 3 4 2 b))
(init (cell 3 4 3 b))
(init (cell 3 4 4 b))
(init (cell 4 1 1 b))
(init (cell 4 1 2 b))
(init (cell 4 1 3 b))
(init (cell 4 1 4 b))
(init (cell 4 2 1 b))
(init (cell 4 2 2 b))
(init (cell 4 2 3 b))
(init (cell 4 2 4 b))
(init (cell 4 3 1 b))
(init (cell 4 3 2 b))
(init (cell 4 3 3 b))
(init (cell 4 3 4 b))
(init (cell 4 4 1 b))
(init (cell 4 4 2 b))
(init (cell 4 4 3 b))
(init (cell 4 4 4 b))

(<= (legal ?player noop)
    (role ?player)
    (true (control ?other))
    (distinct ?player ?other))

(<= (legal xplayer (mark ?x ?y ?z))
    (true (control xplayer))
    (true (cell ?x ?y ?z b))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (legal oplayer (mark ?x ?y ?z))
    (true (control oplayer))
    (true (cell ?x ?y ?z b))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (next (cell ?x ?y ?z x))
    (does xplayer (mark ?x ?y ?z))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (next (cell ?x ?y ?z o))
    (does oplayer (mark ?x ?y ?z))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (next (cell ?x ?y ?z ?w))
    (true (cell ?x ?y ?z ?w))
    (distinct ?w b)
    (index ?x)
    (index ?y)
    (index ?z)
    (index ?w))

(<= (next (control xplayer))
    (true (control oplayer)))

(<= (next (control oplayer))
    (true (control xplayer)))

(<= (line ?player)
    (role ?player)
    (index ?x1)
    (index ?x2)
    (index ?x3)
    (index ?x4)
    (index ?y)
    (index ?z)
    (true (cell ?x1 ?y ?z ?player))
    (true (cell ?x2 ?y ?z ?player))
    (true (cell ?x3 ?y ?z ?player))
    (true (cell ?x4 ?y ?z ?player)))

(<= (line ?player)
    (role ?player)
    (index ?x)
    (index ?y1)
    (index ?y2)
    (index ?y3)
    (index ?y4)
    (index ?z)
    (true (cell ?x ?y1 ?z ?player))
    (true (cell ?x ?y2 ?z ?player))
    (true (cell ?x ?y3 ?z ?player))
    (true (cell ?x ?y4 ?z ?player)))

(<= (line ?player)
    (role ?player)
    (index ?x)
    (index ?y)
    (index ?z1)
    (index ?z2)
    (index ?z3)
    (index ?z4)
    (true (cell ?x ?y ?z1 ?player))
    (true (cell ?x ?y ?z2 ?player))
    (true (cell ?x ?y ?z3 ?player))
    (true (cell ?x ?y ?z4 ?player)))

(<= (line ?player)
    (role ?player)
    (index ?x1)
    (index ?x2)
    (index ?x3)
    (index ?x4)
    (index ?y1)
    (index ?y2)
    (index ?y3)
    (index ?y4)
    (true (cell ?x1 ?y1 ?z ?player))
    (true (cell ?x2 ?y2 ?z ?player))
    (true (cell ?x3 ?y3 ?z ?player))
    (true (cell ?x4 ?y4 ?z ?player)))

(<= (line ?player)
    (role ?player)
    (index ?x1)
    (index ?x2)
    (index ?x3)
    (index ?x4)
    (index ?z1)
    (index ?z2)
    (index ?z3)
    (index ?z4)
    (true (cell ?x1 ?y ?z1 ?player))
    (true (cell ?x2 ?y ?z2 ?player))
    (true (cell ?x3 ?y ?z3 ?player))
    (true (cell ?x4 ?y ?z4 ?player)))

(<= (line ?player)
    (role ?player)
    (index ?y1)
    (index ?y2)
    (index ?y3)
    (index ?y4)
    (index ?z1)
    (index ?z2)
    (index ?z3)
    (index ?z4)
    (true (cell ?x ?y1 ?z1 ?player))
    (true (cell ?x ?y2 ?z2 ?player))
    (true (cell ?x ?y3 ?z3 ?player))
    (true (cell ?x ?y4 ?z4 ?player)))

(<= (line ?player)
    (role ?player)
    (index ?x1)
    (index ?x2)
    (index ?x3)
    (index ?x4)
    (true (cell ?x1 ?x1 ?x1 ?player))
    (true (cell ?x2 ?x2 ?x2 ?player))
    (true (cell ?x3 ?x3 ?x3 ?player))
    (true (cell ?x4 ?x4 ?x4 ?player)))

(<= (line ?player)
    (role ?player)
    (index ?x1)
    (index ?x2)
    (index ?x3)
    (index ?x4)
    (true (cell ?x1 ?x4 ?x1 ?player))
    (true (cell ?x2 ?x3 ?x2 ?player))
    (true (cell ?x3 ?x2 ?x3 ?player))
    (true (cell ?x4 ?x1 ?x4 ?player)))

(<= (terminal)
    (line xplayer))

(<= (terminal)
    (line oplayer))

(<= (terminal)
    (not (true (cell ?x ?y ?z b)))
    (index ?x)
    (index ?y)
    (index ?z))

(<= (goal xplayer 100)
    (line xplayer))

(<= (goal oplayer 0)
    (line xplayer))

(<= (goal oplayer 100)
    (line oplayer))

(<= (goal xplayer 0)
    (line oplayer))

(<= (goal xplayer 50)
    (not (line xplayer))
    (not (line oplayer))
    (terminal))

(<= (goal oplayer 50)
    (not (line xplayer))
    (not (line oplayer))
    (terminal))

(index 1)
(index 2)
(index 3)
(index 4)