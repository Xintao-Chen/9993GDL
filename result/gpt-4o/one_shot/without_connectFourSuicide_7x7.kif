(role red)
(role black)

(index 1)
(index 2)
(index 3)
(index 4)
(index 5)
(index 6)
(index 7)

(init (control red))

(<= (legal red noop)
    (true (control black)))
(<= (legal red (drop ?col))
    (true (control red))
    (openColumn ?col))
(<= (legal black noop)
    (true (control red)))
(<= (legal black (drop ?col))
    (true (control black))
    (openColumn ?col))

(<= (next (cell ?col ?row ?mark))
    (does ?player (drop ?col))
    (lowestEmptyRow ?col ?row)
    (role ?player)
    (markForPlayer ?player ?mark))
(<= (next (cell ?col ?row ?mark))
    (true (cell ?col ?row ?mark)))

(<= (next (control red))
    (true (control black)))
(<= (next (control black))
    (true (control red)))

(<= terminal
    (line red))
(<= terminal
    (line black))
(<= terminal
    (not open))

(<= (goal red 100)
    (line black))
(<= (goal red 50)
    (not (line red))
    (not (line black))
    (not open))
(<= (goal red 0)
    (line red))
(<= (goal red 0)
    (not (line red))
    (not (line black))
    open)

(<= (goal black 100)
    (line red))
(<= (goal black 50)
    (not (line red))
    (not (line black))
    (not open))
(<= (goal black 0)
    (line black))
(<= (goal black 0)
    (not (line red))
    (not (line black))
    open)

(<= (line ?mark)
    (horizontalLine ?mark))
(<= (line ?mark)
    (verticalLine ?mark))
(<= (line ?mark)
    (diagonalLine ?mark))

(<= (horizontalLine ?mark)
    (index ?row)
    (index ?col1)
    (index ?col2)
    (index ?col3)
    (index ?col4)
    (succ ?col1 ?col2)
    (succ ?col2 ?col3)
    (succ ?col3 ?col4)
    (true (cell ?col1 ?row ?mark))
    (true (cell ?col2 ?row ?mark))
    (true (cell ?col3 ?row ?mark))
    (true (cell ?col4 ?row ?mark)))

(<= (verticalLine ?mark)
    (index ?col)
    (index ?row1)
    (index ?row2)
    (index ?row3)
    (index ?row4)
    (succ ?row1 ?row2)
    (succ ?row2 ?row3)
    (succ ?row3 ?row4)
    (true (cell ?col ?row1 ?mark))
    (true (cell ?col ?row2 ?mark))
    (true (cell ?col ?row3 ?mark))
    (true (cell ?col ?row4 ?mark)))

(<= (diagonalLine ?mark)
    (index ?col1)
    (index ?col2)
    (index ?col3)
    (index ?col4)
    (index ?row1)
    (index ?row2)
    (index ?row3)
    (index ?row4)
    (succ ?col1 ?col2)
    (succ ?col2 ?col3)
    (succ ?col3 ?col4)
    (succ ?row1 ?row2)
    (succ ?row2 ?row3)
    (succ ?row3 ?row4)
    (true (cell ?col1 ?row1 ?mark))
    (true (cell ?col2 ?row2 ?mark))
    (true (cell ?col3 ?row3 ?mark))
    (true (cell ?col4 ?row4 ?mark)))

(<= (diagonalLine ?mark)
    (index ?col1)
    (index ?col2)
    (index ?col3)
    (index ?col4)
    (index ?row1)
    (index ?row2)
    (index ?row3)
    (index ?row4)
    (succ ?col1 ?col2)
    (succ ?col2 ?col3)
    (succ ?col3 ?col4)
    (succ ?row4 ?row3)
    (succ ?row3 ?row2)
    (succ ?row2 ?row1)
    (true (cell ?col1 ?row4 ?mark))
    (true (cell ?col2 ?row3 ?mark))
    (true (cell ?col3 ?row2 ?mark))
    (true (cell ?col4 ?row1 ?mark)))

(<= (openColumn ?col)
    (index ?col)
    (lowestEmptyRow ?col ?row))

(<= (lowestEmptyRow ?col ?row)
    (index ?row)
    (not (true (cell ?col ?row red)))
    (not (true (cell ?col ?row black)))
    (succ ?row ?nextRow)
    (not (lowestEmptyRow ?col ?nextRow)))

(<= open
    (openColumn ?col))

(succ 1 2)
(succ 2 3)
(succ 3 4)
(succ 4 5)
(succ 5 6)
(succ 6 7)

(<= (markForPlayer red red))
(<= (markForPlayer black black))