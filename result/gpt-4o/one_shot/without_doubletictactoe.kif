(role xplayer)
(role oplayer)

(position a)
(position b)
(position c)
(position d)
(position e)
(position f)
(position g)
(position h)
(position i)

(board board1)
(board board2)

(init (control xplayer board1))
(init (control oplayer board2))

(<= (legal xplayer noop)
    (true (control oplayer ?board)))
(<= (legal xplayer (mark ?pos))
    (true (control xplayer ?board))
    (blank ?board ?pos)
    (not (line ?board x))
    (not (line ?board o)))
(<= (legal oplayer noop)
    (true (control xplayer ?board)))
(<= (legal oplayer (mark ?pos))
    (true (control oplayer ?board))
    (blank ?board ?pos)
    (not (line ?board x))
    (not (line ?board o)))

(<= (next (mark ?board ?pos ?mark))
    (role ?player)
    (does ?player (mark ?pos))
    (true (control ?player ?board)))
(<= (next (mark ?board ?pos ?mark))
    (true (mark ?board ?pos ?mark)))

(<= (next (control xplayer board1))
    (true (control oplayer board2)))
(<= (next (control oplayer board2))
    (true (control xplayer board1)))

(<= terminal
    (line board1 x)
    (line board2 x))
(<= terminal
    (line board1 o)
    (line board2 o))
(<= terminal
    (full board1)
    (line board2 x))
(<= terminal
    (full board2)
    (line board1 x))
(<= terminal
    (full board1)
    (line board2 o))
(<= terminal
    (full board2)
    (line board1 o))
(<= terminal
    (full board1)
    (full board2))

(<= (goal xplayer 100)
    (line board1 x)
    (line board2 x))
(<= (goal xplayer 75)
    (line board1 x)
    (not (line board2 o))
    (not (line board2 x)))
(<= (goal xplayer 75)
    (line board2 x)
    (not (line board1 o))
    (not (line board1 x)))
(<= (goal xplayer 25)
    (line board1 o)
    (not (line board2 x))
    (not (line board2 o)))
(<= (goal xplayer 25)
    (line board2 o)
    (not (line board1 x))
    (not (line board1 o)))
(<= (goal xplayer 0)
    (line board1 o)
    (line board2 o))

(<= (goal oplayer 100)
    (line board1 o)
    (line board2 o))
(<= (goal oplayer 75)
    (line board1 o)
    (not (line board2 x))
    (not (line board2 o)))
(<= (goal oplayer 75)
    (line board2 o)
    (not (line board1 x))
    (not (line board1 o)))
(<= (goal oplayer 25)
    (line board1 x)
    (not (line board2 o))
    (not (line board2 x)))
(<= (goal oplayer 25)
    (line board2 x)
    (not (line board1 o))
    (not (line board1 x)))
(<= (goal oplayer 0)
    (line board1 x)
    (line board2 x))

(<= (row ?board ?mark)
    (position ?p1) (position ?p2) (position ?p3)
    (true (mark ?board ?p1 ?mark))
    (true (mark ?board ?p2 ?mark))
    (true (mark ?board ?p3 ?mark))
    (or (and (= ?p1 a) (= ?p2 b) (= ?p3 c))
        (and (= ?p1 d) (= ?p2 e) (= ?p3 f))
        (and (= ?p1 g) (= ?p2 h) (= ?p3 i))))

(<= (col ?board ?mark)
    (position ?p1) (position ?p2) (position ?p3)
    (true (mark ?board ?p1 ?mark))
    (true (mark ?board ?p2 ?mark))
    (true (mark ?board ?p3 ?mark))
    (or (and (= ?p1 a) (= ?p2 d) (= ?p3 g))
        (and (= ?p1 b) (= ?p2 e) (= ?p3 h))
        (and (= ?p1 c) (= ?p2 f) (= ?p3 i))))

(<= (diag ?board ?mark)
    (position ?p1) (position ?p2) (position ?p3)
    (true (mark ?board ?p1 ?mark))
    (true (mark ?board ?p2 ?mark))
    (true (mark ?board ?p3 ?mark))
    (or (and (= ?p1 a) (= ?p2 e) (= ?p3 i))
        (and (= ?p1 c) (= ?p2 e) (= ?p3 g))))

(<= (line ?board ?mark)
    (row ?board ?mark))
(<= (line ?board ?mark)
    (col ?board ?mark))
(<= (line ?board ?mark)
    (diag ?board ?mark))

(<= (blank ?board ?pos)
    (position ?pos)
    (not (true (mark ?board ?pos x)))
    (not (true (mark ?board ?pos o))))

(<= (full ?board)
    (position ?pos)
    (not (blank ?board ?pos)))