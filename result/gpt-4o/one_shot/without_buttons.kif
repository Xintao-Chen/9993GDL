(role robot)

(light p)
(light q)
(light r)

(step 1)
(step 2)
(step 3)
(step 4)
(step 5)
(step 6)
(step 7)

(init (lightState p off))
(init (lightState q off))
(init (lightState r off))
(init (stepCount 1))

(<= (legal robot a) (true (stepCount ?s)) (step ?s))
(<= (legal robot b) (true (stepCount ?s)) (step ?s))
(<= (legal robot c) (true (stepCount ?s)) (step ?s))

(<= (next (lightState p on))
    (does robot a)
    (true (lightState p off)))
(<= (next (lightState p off))
    (does robot a)
    (true (lightState p on)))

(<= (next (lightState q on))
    (does robot a)
    (true (lightState q off)))
(<= (next (lightState q off))
    (does robot a)
    (true (lightState q on)))

(<= (next (lightState r on))
    (does robot a)
    (true (lightState r off)))
(<= (next (lightState r off))
    (does robot a)
    (true (lightState r on)))

(<= (next (lightState p ?qState))
    (does robot b)
    (true (lightState q ?qState)))
(<= (next (lightState q ?pState))
    (does robot b)
    (true (lightState p ?pState)))
(<= (next (lightState r ?rState))
    (does robot b)
    (true (lightState r ?rState)))

(<= (next (lightState q ?rState))
    (does robot c)
    (true (lightState r ?rState)))
(<= (next (lightState r ?qState))
    (does robot c)
    (true (lightState q ?qState)))
(<= (next (lightState p ?pState))
    (does robot c)
    (true (lightState p ?pState)))

(<= (next (stepCount ?nextStep))
    (true (stepCount ?currentStep))
    (succ ?currentStep ?nextStep))

(succ 1 2)
(succ 2 3)
(succ 3 4)
(succ 4 5)
(succ 5 6)
(succ 6 7)

(<= terminal
    (true (stepCount 7)))
(<= terminal
    (true (lightState p on))
    (true (lightState q on))
    (true (lightState r on)))

(<= (goal robot 100)
    (true (lightState p on))
    (true (lightState q on))
    (true (lightState r on)))
(<= (goal robot 0)
    (not (true (lightState p on)))
    (not (true (lightState q on)))
    (not (true (lightState r on))))