(role xplayer)
(role oplayer)

(position a)
(position b)
(position c)
(position d)
(position e)
(position f)
(position g)
(position h)
(position i)

(init (control xplayer))
(init (board1 a blank))
(init (board1 b blank))
(init (board1 c blank))
(init (board1 d blank))
(init (board1 e blank))
(init (board1 f blank))
(init (board1 g blank))
(init (board1 h blank))
(init (board1 i blank))
(init (board2 a blank))
(init (board2 b blank))
(init (board2 c blank))
(init (board2 d blank))
(init (board2 e blank))
(init (board2 f blank))
(init (board2 g blank))
(init (board2 h blank))
(init (board2 i blank))

(<= (legal xplayer noop)
    (true (control oplayer)))
(<= (legal xplayer (mark board1 ?pos x))
    (true (control xplayer))
    (position ?pos)
    (true (board1 ?pos blank))
    (not (line x board1))
    (not (line o board1)))
(<= (legal oplayer noop)
    (true (control xplayer)))
(<= (legal oplayer (mark board2 ?pos o))
    (true (control oplayer))
    (position ?pos)
    (true (board2 ?pos blank))
    (not (line x board2))
    (not (line o board2)))

(<= (next (board1 ?pos x))
    (does xplayer (mark board1 ?pos x)))
(<= (next (board1 ?pos ?mark))
    (true (board1 ?pos ?mark))
    (not (does xplayer (mark board1 ?pos x))))
(<= (next (board2 ?pos o))
    (does oplayer (mark board2 ?pos o)))
(<= (next (board2 ?pos ?mark))
    (true (board2 ?pos ?mark))
    (not (does oplayer (mark board2 ?pos o))))

(<= (next (control xplayer))
    (true (control oplayer)))
(<= (next (control oplayer))
    (true (control xplayer)))

(<= terminal
    (line x board1))
(<= terminal
    (line o board1))
(<= terminal
    (line x board2))
(<= terminal
    (line o board2))
(<= terminal
    (not (open board1))
    (not (open board2)))

(<= (goal xplayer 100)
    (line x board1)
    (line x board2))
(<= (goal xplayer 75)
    (line x board1)
    (not (line x board2))
    (not (line o board2)))
(<= (goal xplayer 25)
    (line o board2)
    (not (line x board1))
    (not (line o board1)))
(<= (goal xplayer 50)
    (not (line x board1))
    (not (line o board1))
    (not (line x board2))
    (not (line o board2))
    (not (open board1))
    (not (open board2)))

(<= (goal oplayer 100)
    (line o board1)
    (line o board2))
(<= (goal oplayer 75)
    (line o board2)
    (not (line o board1))
    (not (line x board1)))
(<= (goal oplayer 25)
    (line x board1)
    (not (line o board2))
    (not (line x board2)))
(<= (goal oplayer 50)
    (not (line x board1))
    (not (line o board1))
    (not (line x board2))
    (not (line o board2))
    (not (open board1))
    (not (open board2)))

(<= (line ?mark ?board)
    (position ?p1)
    (position ?p2)
    (position ?p3)
    (true (?board ?p1 ?mark))
    (true (?board ?p2 ?mark))
    (true (?board ?p3 ?mark))
    (linePattern ?p1 ?p2 ?p3))

(<= (linePattern a b c))
(<= (linePattern d e f))
(<= (linePattern g h i))
(<= (linePattern a d g))
(<= (linePattern b e h))
(<= (linePattern c f i))
(<= (linePattern a e i))
(<= (linePattern c e g))

(<= (open ?board)
    (position ?pos)
    (true (?board ?pos blank)))