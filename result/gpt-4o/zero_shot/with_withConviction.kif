(role red)
(role blue)

(init (control red))
(init (cell 1 1 empty))
(init (cell 1 2 empty))
(init (cell 1 3 empty))
(init (cell 1 4 empty))
(init (cell 1 5 empty))
(init (cell 2 1 empty))
(init (cell 2 2 empty))
(init (cell 2 3 empty))
(init (cell 2 4 empty))
(init (cell 2 5 empty))
(init (cell 3 1 empty))
(init (cell 3 2 empty))
(init (cell 3 3 empty))
(init (cell 3 4 empty))
(init (cell 3 5 empty))
(init (cell 4 1 empty))
(init (cell 4 2 empty))
(init (cell 4 3 empty))
(init (cell 4 4 empty))
(init (cell 4 5 empty))
(init (cell 5 1 empty))
(init (cell 5 2 empty))
(init (cell 5 3 empty))
(init (cell 5 4 empty))
(init (cell 5 5 empty))
(init (prohibited red none))
(init (prohibited blue none))

(<= (legal ?player (mark ?x ?y ?shade))
    (true (control ?player))
    (true (cell ?x ?y empty))
    (not (true (prohibited ?player ?shade)))
    (distinct ?shade none))

(<= (legal ?player noop)
    (not (true (control ?player))))

(<= (next (cell ?x ?y ?shade))
    (does ?player (mark ?x ?y ?shade)))

(<= (next (cell ?x ?y ?content))
    (true (cell ?x ?y ?content))
    (not (does ?player (mark ?x ?y ?shade))))

(<= (next (control red))
    (true (control blue)))

(<= (next (control blue))
    (true (control red)))

(<= (next (prohibited ?player medium))
    (does ?player (mark ?x ?y weak)))

(<= (next (prohibited ?player strong))
    (does ?player (mark ?x ?y weak)))

(<= (next (prohibited ?player none))
    (does ?player (mark ?x ?y medium))
    (does ?player (mark ?x ?y strong)))

(<= (next (prohibited ?player none))
    (true (prohibited ?player none)))

(<= (line ?player ?shade)
    (row ?n)
    (forall ?y (true (cell ?n ?y ?shade)))
    (not (exists ?y (true (cell ?n ?y ?other)))
         (distinct ?other ?shade)))

(<= (line ?player ?shade)
    (column ?n)
    (forall ?x (true (cell ?x ?n ?shade)))
    (not (exists ?x (true (cell ?x ?n ?other)))
         (distinct ?other ?shade)))

(<= (terminal)
    (line red ?shade))
(<= (terminal)
    (line blue ?shade))
(<= (terminal)
    (not (exists ?x ?y (true (cell ?x ?y empty)))))

(<= (goal red 100)
    (line red ?shade))
(<= (goal blue 0)
    (line red ?shade))

(<= (goal blue 100)
    (line blue ?shade))
(<= (goal red 0)
    (line blue ?shade))

(<= (goal red 50)
    (not (line red ?shade))
    (not (line blue ?shade))
    (not (exists ?x ?y (true (cell ?x ?y empty)))))

(<= (goal blue 50)
    (not (line red ?shade))
    (not (line blue ?shade))
    (not (exists ?x ?y (true (cell ?x ?y empty)))))

(row 1)
(row 2)
(row 3)
(row 4)
(row 5)

(column 1)
(column 2)
(column 3)
(column 4)
(column 5)