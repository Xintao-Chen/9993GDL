(role robot)

(init (step 0))
(init (cell 1 1 0))
(init (cell 1 2 0))
(init (cell 1 3 0))
(init (cell 1 4 0))
(init (cell 2 1 0))
(init (cell 2 2 0))
(init (cell 2 3 0))
(init (cell 2 4 0))
(init (cell 3 1 0))
(init (cell 3 2 0))
(init (cell 3 3 0))
(init (cell 3 4 0))
(init (cell 4 1 0))
(init (cell 4 2 0))
(init (cell 4 3 0))
(init (cell 4 4 0))

(<= (legal robot noop) true)
(<= (legal robot (press X1 Y1 X2 Y2))
    (true (cell X1 Y1 S1))
    (true (cell X2 Y2 S2))
    (distinct (X1 Y1) (X2 Y2))
    (<= S1 4)
    (<= S2 4)
    (<= X1 4) (<= Y1 4)
    (<= X2 4) (<= Y2 4)
    (>= X1 1) (>= Y1 1)
    (>= X2 1) (>= Y2 1))

(<= (next (cell X Y S1))
    (does robot (press X Y _ _))
    (true (cell X Y S))
    (S1 (+ S 1))
    (<= S1 4))

(<= (next (cell X Y S1))
    (does robot (press _ _ X Y))
    (true (cell X Y S))
    (S1 (+ S 1))
    (<= S1 4))

(<= (next (cell X Y S))
    (does robot noop)
    (true (cell X Y S)))

(<= (next (cell X Y S))
    (does robot (press X1 Y1 X2 Y2))
    (true (cell X Y S))
    (not (or (and (= X X1) (= Y Y1))
             (and (= X X2) (= Y Y2)))))

(<= (next (step N1))
    (true (step N))
    (does robot _)
    (N1 (+ N 1)))

(<= (terminal)
    (true (cell 1 1 4))
    (true (cell 1 2 4))
    (true (cell 2 1 4))
    (true (cell 2 2 4)))

(<= (terminal)
    (true (cell 1 3 4))
    (true (cell 1 4 4))
    (true (cell 2 3 4))
    (true (cell 2 4 4)))

(<= (terminal)
    (true (cell 3 1 4))
    (true (cell 3 2 4))
    (true (cell 4 1 4))
    (true (cell 4 2 4)))

(<= (terminal)
    (true (cell 3 3 4))
    (true (cell 3 4 4))
    (true (cell 4 3 4))
    (true (cell 4 4 4)))

(<= (terminal)
    (true (step 20)))

(<= (goal robot 100)
    (terminal)
    (or (and (true (cell 1 1 4))
             (true (cell 1 2 4))
             (true (cell 2 1 4))
             (true (cell 2 2 4)))
        (and (true (cell 1 3 4))
             (true (cell 1 4 4))
             (true (cell 2 3 4))
             (true (cell 2 4 4)))
        (and (true (cell 3 1 4))
             (true (cell 3 2 4))
             (true (cell 4 1 4))
             (true (cell 4 2 4)))
        (and (true (cell 3 3 4))
             (true (cell 3 4 4))
             (true (cell 4 3 4))
             (true (cell 4 4 4))))

(<= (goal robot 0)
    (terminal)
    (not (or (and (true (cell 1 1 4))
                  (true (cell 1 2 4))
                  (true (cell 2 1 4))
                  (true (cell 2 2 4)))
             (and (true (cell 1 3 4))
                  (true (cell 1 4 4))
                  (true (cell 2 3 4))
                  (true (cell 2 4 4)))
             (and (true (cell 3 1 4))
                  (true (cell 3 2 4))
                  (true (cell 4 1 4))
                  (true (cell 4 2 4)))
             (and (true (cell 3 3 4))
                  (true (cell 3 4 4))
                  (true (cell 4 3 4))
                  (true (cell 4 4 4)))))