(role flipper)
(role caller)

(init (step 0))
(init (score flipper 0))
(init (score caller 0))

(<= (legal flipper heads)
    (true (step ?s)))
(<= (legal flipper tails)
    (true (step ?s)))
(<= (legal flipper neither)
    (true (step ?s)))

(<= (legal caller heads)
    (true (step ?s)))
(<= (legal caller tails)
    (true (step ?s)))
(<= (legal caller neither)
    (true (step ?s)))

(<= (next (score flipper ?newScore))
    (true (score flipper ?score))
    (does flipper ?actionF)
    (does caller ?actionC)
    (sameAction ?actionF ?actionC)
    (plus ?score 0 ?newScore))

(<= (next (score flipper ?newScore))
    (true (score flipper ?score))
    (does flipper ?actionF)
    (does caller ?actionC)
    (not (sameAction ?actionF ?actionC))
    (plus ?score 10 ?newScore))

(<= (next (score flipper ?newScore))
    (true (score flipper ?score))
    (does flipper neither)
    (does caller neither)
    (plus ?score 1 ?newScore))

(<= (next (score flipper ?newScore))
    (true (score flipper ?score))
    (does flipper neither)
    (does caller ?actionC)
    (distinct ?actionC neither)
    (plus ?score 9 ?newScore))

(<= (next (score caller ?newScore))
    (true (score caller ?score))
    (does flipper ?actionF)
    (does caller ?actionC)
    (sameAction ?actionF ?actionC)
    (plus ?score 10 ?newScore))

(<= (next (score caller ?newScore))
    (true (score caller ?score))
    (does flipper ?actionF)
    (does caller ?actionC)
    (not (sameAction ?actionF ?actionC))
    (plus ?score 0 ?newScore))

(<= (next (score caller ?newScore))
    (true (score caller ?score))
    (does flipper neither)
    (does caller neither)
    (plus ?score 1 ?newScore))

(<= (next (score caller ?newScore))
    (true (score caller ?score))
    (does flipper ?actionF)
    (distinct ?actionF neither)
    (does caller neither)
    (plus ?score 9 ?newScore))

(<= (next (step ?nextStep))
    (true (step ?s))
    (succ ?s ?nextStep))

(<= terminal
    (true (step 10)))

(<= (goal flipper ?fScore)
    (true (step 10))
    (true (score flipper ?fScore)))

(<= (goal caller ?cScore)
    (true (step 10))
    (true (score caller ?cScore)))

(<= (sameAction ?action ?action)
    (action ?action))

(succ 0 1)
(succ 1 2)
(succ 2 3)
(succ 3 4)
(succ 4 5)
(succ 5 6)
(succ 6 7)
(succ 7 8)
(succ 8 9)
(succ 9 10)

(<= (plus ?x 0 ?x)
    (number ?x))
(<= (plus ?x 1 ?z)
    (succ ?x ?z))
(<= (plus ?x 9 ?z)
    (succ ?y ?z)
    (succ ?x ?y))
(<= (plus ?x 10 ?z)
    (succ ?y ?z)
    (succ ?x ?y)
    (succ ?y ?z))

(action heads)
(action tails)
(action neither)

(number 0)
(number 1)
(number 2)
(number 3)
(number 4)
(number 5)
(number 6)
(number 7)
(number 8)
(number 9)
(number 10)