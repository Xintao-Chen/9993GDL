(role odd)
(role even)

(index 1)
(index 2)
(index 3)

(init (control odd))
(init (cell 1 1 b))
(init (cell 1 2 b))
(init (cell 1 3 b))
(init (cell 2 1 b))
(init (cell 2 2 b))
(init (cell 2 3 b))
(init (cell 3 1 b))
(init (cell 3 2 b))
(init (cell 3 3 b))

(<= (legal odd noop)
    (true (control even)))
(<= (legal odd (mark ?m ?n ?x))
    (true (control odd))
    (oddNumber ?x)
    (blankCell ?m ?n))
(<= (legal even noop)
    (true (control odd)))
(<= (legal even (mark ?m ?n ?x))
    (true (control even))
    (evenNumber ?x)
    (blankCell ?m ?n))

(<= (next (cell ?m ?n ?x))
    (role ?player)
    (does ?player (mark ?m ?n ?x)))
(<= (next (cell ?m ?n ?x))
    (true (cell ?m ?n ?x))
    (not (does ?player (mark ?m ?n ?))))
(<= (next (control odd))
    (true (control even)))
(<= (next (control even))
    (true (control odd)))

(<= terminal
    (line))
(<= terminal
    (not open))

(<= (goal odd 100)
    (line)
    (not (true (control odd))))
(<= (goal odd 50)
    (not (line))
    (not open))
(<= (goal odd 0)
    (line)
    (true (control odd)))
(<= (goal even 100)
    (line)
    (not (true (control even))))
(<= (goal even 50)
    (not (line))
    (not open))
(<= (goal even 0)
    (line)
    (true (control even)))

(<= (row ?m)
    (index ?n1)
    (index ?n2)
    (index ?n3)
    (true (cell ?m ?n1 ?x1))
    (true (cell ?m ?n2 ?x2))
    (true (cell ?m ?n3 ?x3))
    (sumLine ?x1 ?x2 ?x3))
(<= (col ?n)
    (index ?m1)
    (index ?m2)
    (index ?m3)
    (true (cell ?m1 ?n ?x1))
    (true (cell ?m2 ?n ?x2))
    (true (cell ?m3 ?n ?x3))
    (sumLine ?x1 ?x2 ?x3))
(<= (diag)
    (true (cell 1 1 ?x1))
    (true (cell 2 2 ?x2))
    (true (cell 3 3 ?x3))
    (sumLine ?x1 ?x2 ?x3))
(<= (diag)
    (true (cell 1 3 ?x1))
    (true (cell 2 2 ?x2))
    (true (cell 3 1 ?x3))
    (sumLine ?x1 ?x2 ?x3))

(<= (line)
    (index ?m)
    (row ?m))
(<= (line)
    (index ?n)
    (col ?n))
(<= (line)
    (diag))

(<= (blankCell ?m ?n)
    (index ?m)
    (index ?n)
    (true (cell ?m ?n b)))
(<= open
    (blankCell ?m ?n))

(oddNumber 1)
(oddNumber 3)
(oddNumber 5)
(oddNumber 7)
(oddNumber 9)

(evenNumber 2)
(evenNumber 4)
(evenNumber 6)
(evenNumber 8)

(<= (sumLine ?x1 ?x2 ?x3)
    (oddNumber ?x1)
    (oddNumber ?x2)
    (oddNumber ?x3)
    (plus ?x1 ?x2 ?s1)
    (plus ?s1 ?x3 15))
(<= (sumLine ?x1 ?x2 ?x3)
    (evenNumber ?x1)
    (evenNumber ?x2)
    (evenNumber ?x3)
    (plus ?x1 ?x2 ?s1)
    (plus ?s1 ?x3 12))

(<= (plus 1 1 2))
(<= (plus 1 2 3))
(<= (plus 1 3 4))
(<= (plus 1 4 5))
(<= (plus 1 5 6))
(<= (plus 1 6 7))
(<= (plus 1 7 8))
(<= (plus 1 8 9))
(<= (plus 1 9 10))
(<= (plus 2 1 3))
(<= (plus 2 2 4))
(<= (plus 2 3 5))
(<= (plus 2 4 6))
(<= (plus 2 5 7))
(<= (plus 2 6 8))
(<= (plus 2 7 9))
(<= (plus 2 8 10))
(<= (plus 2 9 11))
(<= (plus 3 1 4))
(<= (plus 3 2 5))
(<= (plus 3 3 6))
(<= (plus 3 4 7))
(<= (plus 3 5 8))
(<= (plus 3 6 9))
(<= (plus 3 7 10))
(<= (plus 3 8 11))
(<= (plus 3 9 12))
(<= (plus 4 1 5))
(<= (plus 4 2 6))
(<= (plus 4 3 7))
(<= (plus 4 4 8))
(<= (plus 4 5 9))
(<= (plus 4 6 10))
(<= (plus 4 7 11))
(<= (plus 4 8 12))
(<= (plus 4 9 13))
(<= (plus 5 1 6))
(<= (plus 5 2 7))
(<= (plus 5 3 8))
(<= (plus 5 4 9))
(<= (plus 5 5 10))
(<= (plus 5 6 11))
(<= (plus 5 7 12))
(<= (plus 5 8 13))
(<= (plus 5 9 14))
(<= (plus 6 1 7))
(<= (plus 6 2 8))
(<= (plus 6 3 9))
(<= (plus 6 4 10))
(<= (plus 6 5 11))
(<= (plus 6 6 12))
(<= (plus 6 7 13))
(<= (plus 6 8 14))
(<= (plus 6 9 15))
(<= (plus 7 1 8))
(<= (plus 7 2 9))
(<= (plus 7 3 10))
(<= (plus 7 4 11))
(<= (plus 7 5 12))
(<= (plus 7 6 13))
(<= (plus 7 7 14))
(<= (plus 7 8 15))
(<= (plus 7 9 16))
(<= (plus 8 1 9))
(<= (plus 8 2 10))
(<= (plus 8 3 11))
(<= (plus 8 4 12))
(<= (plus 8 5 13))
(<= (plus 8 6 14))
(<= (plus 8 7 15))
(<= (plus 8 8 16))
(<= (plus 8 9 17))
(<= (plus 9 1 10))
(<= (plus 9 2 11))
(<= (plus 9 3 12))
(<= (plus 9 4 13))
(<= (plus 9 5 14))
(<= (plus 9 6 15))
(<= (plus 9 7 16))
(<= (plus 9 8 17))
(<= (plus 9 9 18))