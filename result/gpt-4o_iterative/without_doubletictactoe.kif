(role xplayer)
(role oplayer)

(position a)
(position b)
(position c)
(position d)
(position e)
(position f)
(position g)
(position h)
(position i)

(board board1)
(board board2)

(init (control xplayer board1))
(init (control oplayer board2))

(<= (legal xplayer noop)
    (not (open board1)))
(<= (legal xplayer (mark ?pos board1))
    (true (control xplayer board1))
    (openPos ?pos board1))
(<= (legal oplayer noop)
    (not (open board2)))
(<= (legal oplayer (mark ?pos board2))
    (true (control oplayer board2))
    (openPos ?pos board2))

(<= (next (mark ?pos ?board ?mark))
    (role ?player)
    (does ?player (mark ?pos ?board))
    (board ?board)
    (role ?player)
    (playerMark ?player ?mark))
(<= (next (mark ?pos ?board ?mark))
    (true (mark ?pos ?board ?mark)))

(<= (next (control xplayer board1))
    (true (control oplayer board1)))
(<= (next (control oplayer board1))
    (true (control xplayer board1)))
(<= (next (control xplayer board2))
    (true (control oplayer board2)))
(<= (next (control oplayer board2))
    (true (control xplayer board2)))

(<= terminal
    (line ?mark board1)
    (line ?mark board2))
(<= terminal
    (line ?mark board1)
    (not open board2))
(<= terminal
    (line ?mark board2)
    (not open board1))
(<= terminal
    (not open board1)
    (not open board2))

(<= (goal xplayer 100)
    (line x board1)
    (line x board2))
(<= (goal xplayer 75)
    (line x board1)
    (not (line o board2)))
(<= (goal xplayer 75)
    (line x board2)
    (not (line o board1)))
(<= (goal xplayer 25)
    (line o board1)
    (not (line x board2)))
(<= (goal xplayer 25)
    (line o board2)
    (not (line x board1)))
(<= (goal xplayer 0)
    (line o board1)
    (line o board2))

(<= (goal oplayer 100)
    (line o board1)
    (line o board2))
(<= (goal oplayer 75)
    (line o board1)
    (not (line x board2)))
(<= (goal oplayer 75)
    (line o board2)
    (not (line x board1)))
(<= (goal oplayer 25)
    (line x board1)
    (not (line o board2)))
(<= (goal oplayer 25)
    (line x board2)
    (not (line o board1)))
(<= (goal oplayer 0)
    (line x board1)
    (line x board2))

(<= (line ?mark ?board)
    (row ?row ?mark ?board))
(<= (line ?mark ?board)
    (col ?col ?mark ?board))
(<= (line ?mark ?board)
    (diag ?mark ?board))

(<= (row ?row ?mark ?board)
    (position ?row)
    (true (mark a ?board ?mark))
    (true (mark b ?board ?mark))
    (true (mark c ?board ?mark)))
(<= (row ?row ?mark ?board)
    (position ?row)
    (true (mark d ?board ?mark))
    (true (mark e ?board ?mark))
    (true (mark f ?board ?mark)))
(<= (row ?row ?mark ?board)
    (position ?row)
    (true (mark g ?board ?mark))
    (true (mark h ?board ?mark))
    (true (mark i ?board ?mark)))

(<= (col ?col ?mark ?board)
    (position ?col)
    (true (mark a ?board ?mark))
    (true (mark d ?board ?mark))
    (true (mark g ?board ?mark)))
(<= (col ?col ?mark ?board)
    (position ?col)
    (true (mark b ?board ?mark))
    (true (mark e ?board ?mark))
    (true (mark h ?board ?mark)))
(<= (col ?col ?mark ?board)
    (position ?col)
    (true (mark c ?board ?mark))
    (true (mark f ?board ?mark))
    (true (mark i ?board ?mark)))

(<= (diag ?mark ?board)
    (true (mark a ?board ?mark))
    (true (mark e ?board ?mark))
    (true (mark i ?board ?mark)))
(<= (diag ?mark ?board)
    (true (mark c ?board ?mark))
    (true (mark e ?board ?mark))
    (true (mark g ?board ?mark)))

(<= (openPos ?pos ?board)
    (position ?pos)
    (board ?board)
    (not (true (mark ?pos ?board x)))
    (not (true (mark ?pos ?board o))))

(<= open
    (openPos ?pos ?board))

(playerMark xplayer x)
(playerMark oplayer o)