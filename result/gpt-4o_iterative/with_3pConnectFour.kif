(role red)
(role yellow)
(role blue)

(index 1)
(index 2)
(index 3)
(index 4)
(index 5)
(index 6)
(index 7)
(index 8)

(init (control red))

(<= (legal red noop)
    (true (control yellow)))
(<= (legal red noop)
    (true (control blue)))
(<= (legal red (drop ?col))
    (true (control red))
    (openColumn ?col))

(<= (legal yellow noop)
    (true (control red)))
(<= (legal yellow noop)
    (true (control blue)))
(<= (legal yellow (drop ?col))
    (true (control yellow))
    (openColumn ?col))

(<= (legal blue noop)
    (true (control red)))
(<= (legal blue noop)
    (true (control yellow)))
(<= (legal blue (drop ?col))
    (true (control blue))
    (openColumn ?col))

(<= (next (cell ?col ?row ?player))
    (does ?player (drop ?col))
    (openCell ?col ?row)
    (lowestOpen ?col ?row))
(<= (next (cell ?col ?row ?mark))
    (true (cell ?col ?row ?mark)))

(<= (next (control yellow))
    (true (control red)))
(<= (next (control blue))
    (true (control yellow)))
(<= (next (control red))
    (true (control blue)))

(<= terminal
    (line ?player))
(<= terminal
    (not open))

(<= (goal red 100)
    (line red))
(<= (goal red 50)
    (line yellow))
(<= (goal red 0)
    (line blue))
(<= (goal red 0)
    (not (line red))
    (not (line yellow))
    (not (line blue))
    open)

(<= (goal yellow 100)
    (line yellow))
(<= (goal yellow 50)
    (line blue))
(<= (goal yellow 0)
    (line red))
(<= (goal yellow 0)
    (not (line red))
    (not (line yellow))
    (not (line blue))
    open)

(<= (goal blue 100)
    (line blue))
(<= (goal blue 50)
    (line red))
(<= (goal blue 0)
    (line yellow))
(<= (goal blue 0)
    (not (line red))
    (not (line yellow))
    (not (line blue))
    open)

(<= (row ?row ?player)
    (index ?col1)
    (index ?col2)
    (index ?col3)
    (index ?col4)
    (true (cell ?col1 ?row ?player))
    (true (cell ?col2 ?row ?player))
    (true (cell ?col3 ?row ?player))
    (true (cell ?col4 ?row ?player))
    (succ ?col1 ?col2)
    (succ ?col2 ?col3)
    (succ ?col3 ?col4))

(<= (col ?col ?player)
    (index ?row1)
    (index ?row2)
    (index ?row3)
    (index ?row4)
    (true (cell ?col ?row1 ?player))
    (true (cell ?col ?row2 ?player))
    (true (cell ?col ?row3 ?player))
    (true (cell ?row4 ?player))
    (succ ?row1 ?row2)
    (succ ?row2 ?row3)
    (succ ?row3 ?row4))

(<= (diag ?player)
    (index ?col1)
    (index ?col2)
    (index ?col3)
    (index ?col4)
    (index ?row1)
    (index ?row2)
    (index ?row3)
    (index ?row4)
    (true (cell ?col1 ?row1 ?player))
    (true (cell ?col2 ?row2 ?player))
    (true (cell ?col3 ?row3 ?player))
    (true (cell ?col4 ?row4 ?player))
    (succ ?col1 ?col2)
    (succ ?col2 ?col3)
    (succ ?col3 ?col4)
    (succ ?row1 ?row2)
    (succ ?row2 ?row3)
    (succ ?row3 ?row4))

(<= (diag ?player)
    (index ?col1)
    (index ?col2)
    (index ?col3)
    (index ?col4)
    (index ?row1)
    (index ?row2)
    (index ?row3)
    (index ?row4)
    (true (cell ?col1 ?row4 ?player))
    (true (cell ?col2 ?row3 ?player))
    (true (cell ?col3 ?row2 ?player))
    (true (cell ?col4 ?row1 ?player))
    (succ ?col1 ?col2)
    (succ ?col2 ?col3)
    (succ ?col3 ?col4)
    (succ ?row1 ?row2)
    (succ ?row2 ?row3)
    (succ ?row3 ?row4))

(<= (line ?player)
    (row ?row ?player))
(<= (line ?player)
    (col ?col ?player))
(<= (line ?player)
    (diag ?player))

(<= (openColumn ?col)
    (index ?row)
    (openCell ?col ?row))

(<= (openCell ?col ?row)
    (index ?col)
    (index ?row)
    (not (true (cell ?col ?row red)))
    (not (true (cell ?col ?row yellow)))
    (not (true (cell ?col ?row blue))))

(<= (lowestOpen ?col ?row)
    (openCell ?col ?row)
    (not (lowerOpen ?col ?row)))

(<= (lowerOpen ?col ?row)
    (index ?lowerRow)
    (succ ?lowerRow ?row)
    (openCell ?col ?lowerRow))

(<= open
    (openCell ?col ?row))

(succ 1 2)
(succ 2 3)
(succ 3 4)
(succ 4 5)
(succ 5 6)
(succ 6 7)
(succ 7 8)