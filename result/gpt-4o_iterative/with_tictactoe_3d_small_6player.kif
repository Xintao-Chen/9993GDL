(role xrow)
(role xcolumn)
(role xlevel)
(role orow)
(role ocolumn)
(role olevel)

(index 1)
(index 2)
(index 3)

(init (control xrow))

(<= (legal xrow noop)
    (not (true (control xrow))))
(<= (legal xrow (select ?i ?j ?k))
    (true (control xrow))
    (index ?i)
    (index ?j)
    (index ?k)
    (emptyCell ?i ?j ?k))
(<= (legal xcolumn noop)
    (not (true (control xcolumn))))
(<= (legal xcolumn (select ?i ?j ?k))
    (true (control xcolumn))
    (index ?i)
    (index ?j)
    (index ?k)
    (emptyCell ?i ?j ?k))
(<= (legal xlevel noop)
    (not (true (control xlevel))))
(<= (legal xlevel (select ?i ?j ?k))
    (true (control xlevel))
    (index ?i)
    (index ?j)
    (index ?k)
    (emptyCell ?i ?j ?k))
(<= (legal orow noop)
    (not (true (control orow))))
(<= (legal orow (select ?i ?j ?k))
    (true (control orow))
    (index ?i)
    (index ?j)
    (index ?k)
    (emptyCell ?i ?j ?k))
(<= (legal ocolumn noop)
    (not (true (control ocolumn))))
(<= (legal ocolumn (select ?i ?j ?k))
    (true (control ocolumn))
    (index ?i)
    (index ?j)
    (index ?k)
    (emptyCell ?i ?j ?k))
(<= (legal olevel noop)
    (not (true (control olevel))))
(<= (legal olevel (select ?i ?j ?k))
    (true (control olevel))
    (index ?i)
    (index ?j)
    (index ?k)
    (emptyCell ?i ?j ?k))

(<= (next (mark ?i ?j ?k x))
    (does ?player (select ?i ?j ?k))
    (role ?player)
    (or (true (control xrow))
        (true (control xcolumn))
        (true (control xlevel))))
(<= (next (mark ?i ?j ?k o))
    (does ?player (select ?i ?j ?k))
    (role ?player)
    (or (true (control orow))
        (true (control ocolumn))
        (true (control olevel))))
(<= (next (mark ?i ?j ?k ?mark))
    (true (mark ?i ?j ?k ?mark))
    (not (does ?player (select ?i ?j ?k)))
    (role ?player))
(<= (next (control xcolumn))
    (true (control xrow)))
(<= (next (control xlevel))
    (true (control xcolumn)))
(<= (next (control orow))
    (true (control xlevel)))
(<= (next (control ocolumn))
    (true (control orow)))
(<= (next (control olevel))
    (true (control ocolumn)))
(<= (next (control xrow))
    (true (control olevel)))

(<= terminal
    (line x))
(<= terminal
    (line o))
(<= terminal
    (not open))

(<= (goal xrow 100)
    (line x))
(<= (goal xcolumn 100)
    (line x))
(<= (goal xlevel 100)
    (line x))
(<= (goal orow 100)
    (line o))
(<= (goal ocolumn 100)
    (line o))
(<= (goal olevel 100)
    (line o))
(<= (goal xrow 50)
    (not (line x))
    (not (line o))
    (not open))
(<= (goal xcolumn 50)
    (not (line x))
    (not (line o))
    (not open))
(<= (goal xlevel 50)
    (not (line x))
    (not (line o))
    (not open))
(<= (goal orow 50)
    (not (line x))
    (not (line o))
    (not open))
(<= (goal ocolumn 50)
    (not (line x))
    (not (line o))
    (not open))
(<= (goal olevel 50)
    (not (line x))
    (not (line o))
    (not open))
(<= (goal xrow 0)
    (line o))
(<= (goal xcolumn 0)
    (line o))
(<= (goal xlevel 0)
    (line o))
(<= (goal orow 0)
    (line x))
(<= (goal ocolumn 0)
    (line x))
(<= (goal olevel 0)
    (line x))
(<= (goal xrow 0)
    (not (line x))
    (not (line o))
    open)
(<= (goal xcolumn 0)
    (not (line x))
    (not (line o))
    open)
(<= (goal xlevel 0)
    (not (line x))
    (not (line o))
    open)
(<= (goal orow 0)
    (not (line x))
    (not (line o))
    open)
(<= (goal ocolumn 0)
    (not (line x))
    (not (line o))
    open)
(<= (goal olevel 0)
    (not (line x))
    (not (line o))
    open)

(<= (line ?mark)
    (index ?i)
    (row ?i ?mark))
(<= (line ?mark)
    (index ?j)
    (col ?j ?mark))
(<= (line ?mark)
    (index ?k)
    (lev ?k ?mark))
(<= (line ?mark)
    (diag ?mark))

(<= (row ?i ?mark)
    (index ?j)
    (index ?k)
    (true (mark ?i ?j ?k ?mark)))
(<= (col ?j ?mark)
    (index ?i)
    (index ?k)
    (true (mark ?i ?j ?k ?mark)))
(<= (lev ?k ?mark)
    (index ?i)
    (index ?j)
    (true (mark ?i ?j ?k ?mark)))

(<= (diag ?mark)
    (true (mark 1 1 1 ?mark))
    (true (mark 2 2 2 ?mark))
    (true (mark 3 3 3 ?mark)))
(<= (diag ?mark)
    (true (mark 1 1 3 ?mark))
    (true (mark 2 2 2 ?mark))
    (true (mark 3 3 1 ?mark)))
(<= (diag ?mark)
    (true (mark 1 3 1 ?mark))
    (true (mark 2 2 2 ?mark))
    (true (mark 3 1 3 ?mark)))
(<= (diag ?mark)
    (true (mark 3 1 1 ?mark))
    (true (mark 2 2 2 ?mark))
    (true (mark 1 3 3 ?mark)))

(<= (emptyCell ?i ?j ?k)
    (index ?i)
    (index ?j)
    (index ?k)
    (not (true (mark ?i ?j ?k x)))
    (not (true (mark ?i ?j ?k o))))
(<= open
    (emptyCell ?i ?j ?k))